{% extends 'base.html.twig' %}

{% block title %}Booker - Fryzjerzy, Barberzy, Kosmetyczki... zarezerwuj wizytę online!{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
{% endblock %}

{% block body %}
<div class="home">
	{% if featured is not empty %}
		<section class="home__section bg-white">
			<div class="home__container py-10 sm:py-14">
				<div class="flex items-end justify-between gap-6">
					<div>
						<h2 class="home__h2 text-2xl sm:text-3xl font-extrabold text-[color:var(--c-primary)]">Polecane</h2>
						<p class="mt-2 text-sm sm:text-base text-slate-600">Sprawdź miejsca, które użytkownicy lubią najbardziej.</p>
					</div>

					<div class="home__slider-controls flex items-center gap-2">
						<button class="home__slider-btn js-featured-prev" type="button"><i class="fa-solid fa-chevron-left"></i></button>
						<button class="home__slider-btn js-featured-next" type="button"><i class="fa-solid fa-chevron-right"></i></button>
					</div>
				</div>

				<div class="home__slider mt-7">
					<div class="swiper js-featured-swiper">
						<div class="swiper-wrapper">
							{% for item in featured %}

								<div class="swiper-slide">
									<article class="card card--place">
										<div class="card__media">
											<img src="{{ item.image }}" alt="{{ item.name }}"  class="card__img">
											<div class="card__badge">
												<span class="card__badge-score">{{ item.rating|number_format(1, '.', '') }}</span>
												<span class="card__badge-count">{{ item.reviews }} opinii</span>
											</div>
										</div>

										<div class="card__body">
											<h3 class="card__title"><a href="{{ item.url }}">{{ item.name }}</a></h3>
											<p class="card__meta">{{ item.address }}</p>

											<div class="card__footer">
												{% if item.promoted %}
													<span class="card__promo">Promowany</span>
												{% else %}
													<span class="card__promo card__promo--muted">Polecany</span>
												{% endif %}
												<span class="card__info" title="Informacja">ⓘ</span>
											</div>
										</div>
									</article>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</section>
	{% endif %}

	<section class="home__section bg-[color:var(--c-surface)]">
		<div class="home__container py-12 sm:py-16">
			<div class="home__split flex flex-col-reverse lg:flex-row items-center gap-10 lg:gap-14">
				<div class="home__col w-full lg:w-1/2">
					<h2 class="home__h2 text-2xl sm:text-3xl font-extrabold text-[color:var(--c-primary)]">Umów się online</h2>
					<div class="home__text mt-4 text-slate-700">
						<p>Chcesz umówić się do fryzjera, barbera, stylistki paznokci lub fizjoterapeuty w okolicy?</p>
						<p>Wyszukaj miejsce, w którym najlepsi specjaliści zadbają o Ciebie — szybko, wygodnie i bez telefonu.</p>
						<p>Rezerwuj wizyty z dowolnego miejsca i odkrywaj nowe miejsca w okolicy.</p>
					</div>
				</div>

				<div class="home__col w-full lg:w-1/2">
					<img class="home__illus" src="{{ asset('images/home-img-1.jpg') }}" alt="Umów się online" >
				</div>
			</div>
		</div>
	</section>

	<section class="home__section bg-white">
		<div class="home__container py-12 sm:py-16">
			<div class="home__split flex flex-col lg:flex-row items-center gap-10 lg:gap-14">
				<div class="home__col bg-white w-full lg:w-1/2">
					<img class="home__illus" src="{{ asset('images/home-img-2.jpg') }}" alt="Zmień termin bez stresu" >
				</div>

				<div class="home__col w-full lg:w-1/2">
					<h2 class="home__h2 text-2xl sm:text-3xl font-extrabold text-[color:var(--c-primary)]">Coś Ci wypadło? Nie szkodzi!</h2>
					<div class="home__text mt-4 text-slate-700">
						<p>Zmieniaj termin wizyty bez dzwonienia i zarządzaj rezerwacjami w jednym miejscu.</p>
						<p>Powiadomienia przypomną o nadchodzących wizytach, dzięki czemu nic Ci nie umknie.</p>
						<p>Masz pełną kontrolę — szybko i wygodnie.</p>
					</div>
				</div>
			</div>
		</div>
	</section>

    <section class="parallax-cta">
        <div class="parallax-cta__bg parallax-cta__bg--homepage"></div>
        <div class="parallax-cta__overlay"></div>

        <div class="parallax-cta__container">
            <div class="parallax-cta__panel">
                <h2 class="parallax-cta__title">
                    Zarezerwuj usługę<br class="hidden sm:block">
                    dokładnie wtedy, kiedy chcesz
                </h2>

                <p class="parallax-cta__text">
                    Fryzjer, barber, kosmetyczka, paznokcie, fizjoterapia i wiele więcej.<br>
                    Porównuj oferty, sprawdzaj opinie i rezerwuj wizyty online — bez dzwonienia.
                </p>

                <div class="parallax-cta__actions">
                    <a href="#popularne-zabiegi" class="parallax-cta__btn parallax-cta__btn--primary">
                        Przeglądaj kategorie
                    </a>
                </div>
            </div>
        </div>
    </section>

	<section class="home__section bg-[color:var(--c-surface)]">
		<div class="home__container py-12 sm:py-16">
			<div class="home__split flex flex-col-reverse lg:flex-row items-center gap-10 lg:gap-14">
				<div class="home__col w-full lg:w-1/2">
					<h2 class="home__h2 text-2xl sm:text-3xl font-extrabold text-[color:var(--c-primary)]">Najlepsi specjaliści w okolicy</h2>
					<div class="home__text mt-4 text-slate-700">
						<p>Sprawdzaj opinie klientów, przeglądaj portfolio i wybieraj miejsca, które pasują do Ciebie.</p>
						<p>Oszczędzaj czas — rezerwacja online jest prosta i działa 24/7.</p>
						<p>Odkrywaj sprawdzone usługi w Twojej okolicy.</p>
					</div>
				</div>

				<div class="home__col w-full lg:w-1/2">
					<img class="home__illus" src="{{ asset('images/home-img-3.jpg') }}" alt="Najlepsi specjaliści" >
				</div>
			</div>
		</div>
	</section>

	{% if cities is not empty %}
		<section class="home__section bg-white">
			<div class="home__container py-12 sm:py-16">
				<div class="flex items-end justify-between gap-6">
					<div>
						<h2 class="home__h2 text-2xl sm:text-3xl font-extrabold text-[color:var(--c-primary)]">Znajdź specjalistę według miasta</h2>
						<p class="mt-2 text-sm sm:text-base text-slate-600">Szybkie linki do największych miast.</p>
					</div>
				</div>

				<div class="home__cities mt-8">
					<div class="home__cities-list flex flex-wrap -mx-2">
						{% for city in cities %}
    <div class="home__city-item px-2 mb-3 w-1/2 sm:w-1/3 lg:w-1/4">
        <a href="/szukaj/{{ city.slug }}" class="home__city-link">
            <i class="fa-solid fa-angles-right"></i>
            {{ city.name }}
        </a>
    </div>
{% endfor %}
					</div>
				</div>
			</div>
		</section>
	{% endif %}

	{% if blog is not empty %}
		<section class="home__section bg-[color:var(--c-surface)]">
			<div class="home__container py-12 sm:py-16">
				<div class="flex items-end justify-between gap-6">
					<div>
						<h2 class="home__h2 text-2xl sm:text-3xl font-extrabold text-[color:var(--c-primary)]">Polecane dla Ciebie</h2>
						<p class="mt-2 text-sm sm:text-base text-slate-600">Inspiracje i poradniki — na szybko.</p>
					</div>

					<div class="home__slider-controls flex items-center gap-2">
						<button class="home__slider-btn js-blog-prev" type="button"><i class="fa-solid fa-chevron-left"></i></button>
						<button class="home__slider-btn js-blog-next" type="button"><i class="fa-solid fa-chevron-right"></i></button>
					</div>
				</div>

				<div class="home__slider mt-7">
					<div class="swiper js-blog-swiper">
						<div class="swiper-wrapper">
							{% for post in blog %}
								<div class="swiper-slide">
									<article class="card card--post">
										<div class="card__media">
											<img src="{{ post.image }}" alt="{{ post.title }}"  class="card__img">
										</div>

										<div class="card__body">
											<h3 class="card__title"><a href="{{ post.href }}">{{ post.title }}</a></h3>

											<div class="mt-4">
												<a href="{{ post.href }}" class="card__btn">Czytaj więcej</a>
											</div>
										</div>
									</article>
								</div>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</section>
	{% endif %}
</div>
{% endblock %}

{% block custom_scripts %}
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
	(() => {
		const el = document.getElementById('heroTyped');
		if (el) {
			const phrases = [
				'Zarezerwuj czas dla siebie',
				'Odkryj najlepszych specjalistów',
				'Umów wizytę w kilka sekund'
			];

			let p = 0, i = 0, isDeleting = false;

			function tick() {
				const full = phrases[p];
				const next = isDeleting ? full.slice(0, i--) : full.slice(0, i++);

				el.textContent = next;

				let delay = isDeleting ? 35 : 55;
				if (!isDeleting && i === full.length + 6) { isDeleting = true; delay = 700; }
				if (isDeleting && i <= 0) { isDeleting = false; p = (p + 1) % phrases.length; delay = 250; }

				window.setTimeout(tick, delay);
			}

			tick();
		}

		const featuredEl = document.querySelector('.js-featured-swiper');

		if (featuredEl) {
			new Swiper(featuredEl, {
				slidesPerView: 1,
				loop: true,
				spaceBetween: 14,
				breakpoints: {
					640: { slidesPerView: 2, spaceBetween: 16 },
					1024: { slidesPerView: 3, spaceBetween: 18 },
					1280: { slidesPerView: 4, spaceBetween: 18 }
				},
				navigation: {
					prevEl: '.js-featured-prev',
					nextEl: '.js-featured-next'
				}
			});
		}

		const blogEl = document.querySelector('.js-blog-swiper');

		if (blogEl) {
			new Swiper(blogEl, {
				slidesPerView: 1,
				loop: true,
				spaceBetween: 14,
				breakpoints: {
					640: { slidesPerView: 2, spaceBetween: 16 },
					1024: { slidesPerView: 3, spaceBetween: 18 }
				},
				navigation: {
					prevEl: '.js-blog-prev',
					nextEl: '.js-blog-next'
				}
			});
		}
	})();
</script>
{% endblock %}